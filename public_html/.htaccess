# =========================================
# Fluxoteca - .htaccess LIMPO (sem rewrites)
# =========================================

# Impedir listagem de diretórios
Options -Indexes

# -----------------------------
# GZIP / compressão de saída
# -----------------------------
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE \
        text/html text/plain text/xml \
        text/css text/javascript application/javascript \
        application/json application/xml image/svg+xml
    <IfModule mod_headers.c>
        Header append Vary Accept-Encoding
    </IfModule>
</IfModule>

# -----------------------------
# Cache de arquivos estáticos
# -----------------------------
<IfModule mod_expires.c>
    ExpiresActive On

    ExpiresByType text/html "access plus 1 hour"

    ExpiresByType text/css "access plus 7 days"
    ExpiresByType application/javascript "access plus 7 days"
    ExpiresByType text/javascript "access plus 7 days"
    ExpiresByType application/json "access plus 1 day"

    ExpiresByType image/jpeg "access plus 30 days"
    ExpiresByType image/png  "access plus 30 days"
    ExpiresByType image/gif  "access plus 30 days"
    ExpiresByType image/webp "access plus 30 days"
    ExpiresByType image/svg+xml "access plus 30 days"

    ExpiresByType font/ttf   "access plus 30 days"
    ExpiresByType font/otf   "access plus 30 days"
    ExpiresByType font/woff  "access plus 30 days"
    ExpiresByType font/woff2 "access plus 30 days"
</IfModule>

# -----------------------------
# Cabeçalhos de segurança básicos
# -----------------------------
<IfModule mod_headers.c>
    Header set X-Content-Type-Options "nosniff"
    Header always set X-Frame-Options "SAMEORIGIN"
    Header set X-XSS-Protection "1; mode=block"
    Header set Referrer-Policy "strict-origin-when-cross-origin"
    Header set Permissions-Policy "camera=(), microphone=(), geolocation=()"
</IfModule>

# -----------------------------
# Proteção de arquivos sensíveis
# -----------------------------
<FilesMatch "(^\.|wp-config\.php|composer\.(json|lock)|package\.json|yarn\.lock)">
    Require all denied
</FilesMatch>